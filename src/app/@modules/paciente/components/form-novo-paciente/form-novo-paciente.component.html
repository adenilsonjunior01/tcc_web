<button class="btn btn-primary" (click)="modal.show('novo-paciente')">
  <i class="feather icon-plus"></i>
  <span>novo paciente</span>
</button>
<app-modal-animation modalID="novo-paciente" modalClass="md-effect-11">
  <div class="container md-body py-3">
    <div class="row novo-paciente">
      <div class="col-12 d-flex justify-content-end">
        <i class="feather icon-x novo-paciente--icon" (click)="modal.close('novo-paciente')"></i>
      </div>
      <div class="col-12">
        <form [formGroup]="form">
          <div class="row m-0">
            <div class="col-12">
              <h3 class="m-0">Novo Paciente</h3>
              <span>Cadastro paciente</span>
              <hr class="my-2" />
            </div>
            <div class="col-12">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nome Completo</mat-label>
                <input
                  type="text"
                  matInput
                  placeholder="Digite o nome completo"
                  autocomplete="off"
                  formControlName="nome"
                />
                <mat-error>
                  <app-error-control-message [control]="form.controls.nome" label="Nome"></app-error-control-message>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-4">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>CPF</mat-label>
                <input
                  type="text"
                  matInput
                  placeholder="Digite o CPF"
                  autocomplete="off"
                  mask="000.000.000-00"
                  formControlName="cpf"
                />
                <mat-error>
                  <app-error-control-message [control]="form.controls.cpf" label="CPF"></app-error-control-message>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-3">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Telefone</mat-label>
                <input
                  type="text"
                  matInput
                  placeholder="Digite o Telefone"
                  autocomplete="off"
                  mask="(00) 0 0000 0000"
                  formControlName="telefone"
                />
                <mat-error>
                  <app-error-control-message [control]="form.controls.cpf" label="Telefone"></app-error-control-message>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-5">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>E-mail</mat-label>
                <input type="text" matInput placeholder="Digite o e-mail" autocomplete="off" formControlName="email" />
                <mat-error>
                  <app-error-control-message [control]="form.controls.email" label="E-mail"></app-error-control-message>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4 col-12">
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Sexo</mat-label>
                <mat-select formControlName="sexo" required>
                  <mat-option [value]="sexo.value" *ngFor="let sexo of listaSexo">{{ sexo.name }}</mat-option>
                </mat-select>
                <mat-error>
                  <app-error-control-message [control]="form.controls.sexo" label="Sexo"> </app-error-control-message>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-8">
              <mat-form-field appearance="outline">
                <mat-label>Data de nascimento</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="dtNascimento"
                  mask="00/00/0000"
                  [dropSpecialCharacters]="false"
                />
                <mat-error>
                  <app-error-control-message [control]="form.controls.dtNascimento" label="Data de nascimento">
                  </app-error-control-message>
                  <!-- <app-error-control-message [control]="form.get('dtNascimento').hasError('dateValidator')" label="Data"></app-error-control-message> -->
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-12 col-md-4">
              <p class="m-0 perfil">
                Perfil: <span>{{ controlPerfil.value }}</span>
              </p>
            </div>

            <div class="col-md-12 col-sm-12">
              <h3 class="mt-3 mb-0">Endereço Residencial</h3>
              <hr class="my-1" />
            </div>
            <ng-container formGroupName="endereco">
              <div class="col-md-3">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>CEP</mat-label>
                  <input
                    type="text"
                    matInput
                    placeholder="Digite seu CEP"
                    autocomplete="off"
                    mask="00000-000"
                    formControlName="nuCep"
                  />
                </mat-form-field>
              </div>
              <div class="col-md-2 col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Estado</mat-label>
                  <mat-select formControlName="noEstado">
                    <mat-option [value]="estado.abbreviation" *ngFor="let estado of listaEstados">{{
                      estado.name
                    }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-3 col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Cidade</mat-label>
                  <input
                    type="text"
                    matInput
                    placeholder="Digite sua cidade"
                    autocomplete="off"
                    formControlName="noCidade"
                  />
                </mat-form-field>
              </div>
              <div class="col-md-4 col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Logradouro</mat-label>
                  <input
                    type="text"
                    matInput
                    placeholder="Digite o logradouro"
                    autocomplete="off"
                    formControlName="descRua"
                  />
                </mat-form-field>
              </div>
              <div class="col-md-4 col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Bairro</mat-label>
                  <input
                    type="text"
                    matInput
                    placeholder="Digite seu bairro"
                    autocomplete="off"
                    formControlName="descBairro"
                  />
                </mat-form-field>
              </div>
              <div class="col-md-2 col-sm-12">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Número</mat-label>
                  <input
                    type="number"
                    matInput
                    placeholder="Digite o número"
                    autocomplete="off"
                    formControlName="numero"
                  />
                </mat-form-field>
              </div>
            </ng-container>

            <div class="col-12" *ngIf="messageError !== ''">
              <p class="m-0 is-invalid">[Error] {{ messageError }}</p>
            </div>

            <div class="col-12 d-flex align-items-end justify-content-end pt-4">
              <button mat-stroked-button class="btn btn-secondary" (click)="resetForm()">
                <i class="feather icon-x"></i>
                limpar
              </button>
              <button
                mat-stroked-button
                class="btn btn-success ms-3"
                (click)="submitFormPaciente()"
                [disabled]="!form.valid || loading"
              >
                <i *ngIf="!loading" class="feather icon-check"></i>
                <ng-container *ngIf="loading">
                  <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                  <span class="sr-only">Aguarde...</span>
                </ng-container>
                <span *ngIf="!loading">salvar</span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</app-modal-animation>
<app-modal-animation modalID="aviso-senha-paciente" modalClass="md-effect-10 aviso-senha-paciente">
  <div class="container md-body py-3">
    <div class="row m-0 text-center">
      <div class="col-12">
        <h3 class="m-0">Cadastro do usuário efetuado com sucesso!</h3>
      </div>
      <div class="col-12">
        <h4 class="m-0">Atenção!</h4>
        <p class="m-0">
          Essa senha é gerada automaticamente pelo Sistema. Será solicitado alteração no primeiro acesso do usuário a
          plataforma.
        </p>
      </div>
      <div class="col-12">
        <p class="m-0"><strong>Usuário: </strong>{{ dadosPaciente?.email }}</p>
        <p class="m-0"><strong>Senha: </strong>12345678</p>
      </div>
      <div class="col-12 mt-2">
        <button class="btn btn-primary" type="button" (click)="modal.close('aviso-senha-paciente')">
          Ok, entendi.
        </button>
      </div>
    </div>
  </div>
</app-modal-animation>
